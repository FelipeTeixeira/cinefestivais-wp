!function(a,b,c,d){var e={};a("body").on("click",".add-term-thumbnail",function(c){var d=a(this).parent(".thumbnail-field-wrapper").attr("id").slice(0,-14);return wpActiveEditor=d,"undefined"!=typeof e[d]?void e[d].open():(e[d]=wp.media.frames.file_frame=wp.media({title:sftth.chooseImage,button:{text:sftth.selectImage},library:{type:"image"},multiple:!1}),e[d].on("open",function(){var a,c,f=Number(b.getElementById(d).value);f&&(a=wp.media.attachment(f),a&&(a.fetch(),c=e[d].state().get("selection"),c.add([a])))}),e[d].on("select",function(){var c,f=e[d].state().get("selection").first().toJSON(),g=b.getElementById(d),h=a("#"+d+"-field-wrapper"),i=h.data("tt-id"),j=a("<img />");g.value=f.id,f.sizes&&"object"==typeof f.sizes.medium?(j.attr({src:f.sizes.medium.url,height:f.sizes.medium.height,width:f.sizes.medium.width,"class":"attachment-thumbnail"}),c=f.sizes.medium.orientation):f.sizes&&"object"==typeof f.sizes.thumbnail?(j.attr({src:f.sizes.thumbnail.url,height:f.sizes.thumbnail.height,width:f.sizes.thumbnail.width,"class":"attachment-thumbnail"}),c=f.sizes.thumbnail.orientation):(j.attr({src:f.url,height:f.height,width:f.width,"class":"attachment-full"}),c=f.orientation),j.attr({alt:f.alt,title:f.title}),j=j.wrap('<button type="button" class="change-term-thumbnail add-term-thumbnail attachment" id="thumbnail-button" title="'+sftth.changeImage+'"><span class="attachment-preview type-image"><span class="thumbnail"><span class="centered"></span></span></span></button>').parents(".attachment-preview").addClass(c).parents(".change-term-thumbnail"),h.text("").append(j).append("<br/>").append('<button type="button" class="remove-term-thumbnail button button-secondary button-large delete">'+sftth.removeImage+"</button>"),"undefined"!=typeof i&&i&&(h.find(".add-term-thumbnail").attr({disabled:"disabled","aria-disabled":"true",title:sftth.loading}).focus().siblings(".remove-term-thumbnail").after('<span class="spinner is-active"></span>'),wp.media.ajax("set-term-thumbnail",{data:{id:f.id,tt_ID:Number(i),term_ID:a('[name="tag_ID"]').val(),taxonomy:a('[name="taxonomy"]').val(),_wpnonce:b.getElementById("_wpnonce").value}}).done(function(){h.find(".add-term-thumbnail").removeAttr("disabled aria-disabled").attr("title",sftth.changeImage).siblings(".spinner").replaceWith('<span class="dashicons dashicons-yes"></span><input type="hidden" name="term-thumbnail-updated" value="1" />'),wp.a11y&&wp.a11y.speak&&wp.a11y.speak(sftth.successSet)}).fail(function(){h.find(".add-term-thumbnail").removeAttr("disabled aria-disabled").attr("title",sftth.changeImage).siblings(".spinner").replaceWith('<div class="error-message">'+sftth.errorSet+"</div>"),wp.a11y&&wp.a11y.speak&&wp.a11y.speak(sftth.errorSet)}))}),void e[d].open())}),a("body").on("click",".remove-term-thumbnail",function(c){var d=a(this).parent(".thumbnail-field-wrapper").attr("id").slice(0,-14),e=a("#"+d+"-field-wrapper"),f=e.data("tt-id");b.getElementById(d).value="",e.text("").append('<button type="button" class="add-term-thumbnail button button-secondary button-large" id="thumbnail-button">'+sftth.setImage+"</button>"),"undefined"!=typeof f&&f&&(e.find(".add-term-thumbnail").attr({disabled:"disabled","aria-disabled":"true",title:sftth.loading}).focus().after('<span class="spinner is-active"></span>'),wp.media.ajax("delete-term-thumbnail",{data:{tt_ID:Number(f),term_ID:a('[name="tag_ID"]').val(),taxonomy:a('[name="taxonomy"]').val(),_wpnonce:b.getElementById("_wpnonce").value}}).done(function(){e.find(".add-term-thumbnail").removeAttr("disabled aria-disabled").attr("title",sftth.changeImage).siblings(".spinner").replaceWith('<span class="dashicons dashicons-yes"></span><input type="hidden" name="term-thumbnail-updated" value="1" />'),wp.a11y&&wp.a11y.speak&&wp.a11y.speak(sftth.successRemoved)}).fail(function(){e.find(".add-term-thumbnail").removeAttr("disabled aria-disabled title").siblings(".spinner").replaceWith('<div class="error-message">'+sftth.errorRemoved+"</div>"),wp.a11y&&wp.a11y.speak&&wp.a11y.speak(sftth.errorRemoved)}))}),a('[for="thumbnail"]').attr("for","thumbnail-button"),a(".wp-thumbnail-wrap").attr("aria-hidden","true"),a(".thumbnail-field-wrapper").removeAttr("aria-hidden"),a(".add-term-thumbnail, .remove-term-thumbnail").after('<input type="hidden" name="term-thumbnail-updated" value="1" />'),a("#addtag").length&&a.ajaxPrefilter(function(b){var c="&"+b.data+"&";-1!==c.indexOf("&action=add-tag&")&&a(".remove-term-thumbnail").click()})}(jQuery,document,window);